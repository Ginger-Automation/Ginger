<Page x:Class="Ginger.Drivers.DriversConfigsEditPages.UFTCredentialsDialog"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:Actions="clr-namespace:Ginger.Activities"
      xmlns:UserControls="clr-namespace:Amdocs.Ginger.UserControls"
      Title="UFT Mobile Credentials"
      Height="800"
      Width="1050">
    <Grid Background="{StaticResource $BackgroundColor_White}" Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <ScrollViewer Grid.Row="0" Margin="0,0,0,10" VerticalScrollBarVisibility="Auto">
            <StackPanel>
                <!-- Add tooltip to credentials border so the info is available as hover text -->
                <Border BorderBrush="{StaticResource $BackgroundColor_Black}" BorderThickness="1" Padding="10" Margin="0,0,0,10" ToolTip="Provide the UFT Mobile OAuth credentials that match the selected agent.">
                    <DockPanel>
                        <Label Content="Credentials" Style="{StaticResource $LabelStyle}" FontWeight="Bold" DockPanel.Dock="Top" />
                        <StackPanel Orientation="Vertical" Margin="0,5,0,0">
                            <Label Content="Server URL:" Style="{StaticResource $LabelStyle}" />
                            <Actions:UCValueExpression x:Name="xServerUrlVE"
                                                       HorizontalAlignment="Stretch"
                                                       Margin="0,0,0,10" />

                            <Label Content="Client Id:" Style="{StaticResource $LabelStyle}" />
                            <Actions:UCValueExpression x:Name="xClientIdVE"
                                                       HorizontalAlignment="Stretch"
                                                       Margin="0,0,0,10" />

                            <Label Content="Client Secret:" Style="{StaticResource $LabelStyle}" />
                            <Actions:UCValueExpression x:Name="xClientSecretVE"
                                                       HorizontalAlignment="Stretch"
                                                       Margin="0,0,0,10" />

                            <Label Content="Tenant Id:" Style="{StaticResource $LabelStyle}" />
                            <Actions:UCValueExpression x:Name="xTenantIdVE"
                                                       HorizontalAlignment="Stretch" />
                            <!-- Hint line for required credentials (hidden until a credential is missing) -->
                            <TextBlock x:Name="xCredentialsHintTextBlock" Margin="0,6,0,0" Visibility="Collapsed">
                                <Run Foreground="Red" FontWeight="Bold">*</Run>
                                <Run Text=" Please fill all credential fields. This field cannot be empty." Foreground="{StaticResource $BackgroundColor_DarkGray}" />
                            </TextBlock>
                        </StackPanel>
                    </DockPanel>
                </Border>

                <Border BorderBrush="{StaticResource $BackgroundColor_Black}" BorderThickness="1" Padding="10">
                    <DockPanel>
                        <Label Content="Devices" Style="{StaticResource $LabelStyle}" FontWeight="Bold" DockPanel.Dock="Top" />
                        <StackPanel Orientation="Vertical" Margin="0,5,0,0">
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" Margin="0,0,0,10">
                                <UserControls:ucButton x:Name="xShowPhonesBtn"
                                                       ButtonType="RoundTextAndImageButton"
                                                       ButtonStyle="{StaticResource $RoundTextAndImageButtonStyle}"
                                                       ButtonText="Load/Refresh Devices"
                                                       ButtonImageType="Mobile"
                                                       ButtonFontImageSize="12"
                                                       ButtonImageWidth="14"
                                                       ButtonImageHeight="14"
                                                       Click="ShowPhonesButton_Click"
                                                       MinWidth="140"
                                                       HorizontalAlignment="Right" />
                            </StackPanel>

                            <!-- Filters -->
                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch" Margin="0,0,0,10">
                                <StackPanel Orientation="Vertical" Margin="0,0,12,0">
                                    <Label Content="OS Type" Style="{StaticResource $LabelStyle}" />
                                    <ComboBox x:Name="xOsTypeCombo" Width="160" SelectionChanged="Filters_SelectionChanged" Style="{StaticResource $FlatInputComboBoxStyle}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical" Margin="0,0,12,0">
                                    <Label Content="Workspace" Style="{StaticResource $LabelStyle}" />
                                    <ComboBox x:Name="xWorkspaceCombo" Width="220" SelectionChanged="Filters_SelectionChanged" Style="{StaticResource $FlatInputComboBoxStyle}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical" Margin="0,0,12,0">
                                    <Label Content="Status" Style="{StaticResource $LabelStyle}" />
                                    <ComboBox x:Name="xStatusCombo" Width="120" SelectionChanged="Filters_SelectionChanged" Style="{StaticResource $FlatInputComboBoxStyle}" />
                                </StackPanel>
                                <StackPanel Orientation="Vertical">
                                    <Label Content="Availability" Style="{StaticResource $LabelStyle}" />
                                    <ComboBox x:Name="xAvailabilityCombo" Width="120" SelectionChanged="Filters_SelectionChanged" Style="{StaticResource $FlatInputComboBoxStyle}" />
                                </StackPanel>
                            </StackPanel>

                            <Border x:Name="xPhonesResultBorder"
                                    BorderBrush="{StaticResource $BackgroundColor_Gray}"
                                    BorderThickness="1"
                                    Padding="8"
                                    Background="{StaticResource $BackgroundColor_LightGray}"
                                    Visibility="Collapsed">
                                <StackPanel>
                                    <TextBlock x:Name="xPhonesMessageTextBlock"
                                               TextWrapping="Wrap"
                                               Style="{StaticResource $TextBlockStyle}"
                                               Visibility="Collapsed" />
                                    <ListBox x:Name="xPhonesListBox"
                                             Margin="0,5,0,5"
                                             BorderThickness="0"
                                             Background="Transparent"
                                             ScrollViewer.VerticalScrollBarVisibility="Auto"
                                             ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                                             SelectionMode="Single">
                                        <ListBox.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <UniformGrid IsItemsHost="True" Columns="4" />
                                            </ItemsPanelTemplate>
                                        </ListBox.ItemsPanel>
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <Border BorderBrush="{StaticResource $BackgroundColor_Gray}"
                                                        BorderThickness="1"
                                                        Width="220"
                                                        Height="185"
                                                        CornerRadius="8"
                                                        Padding="10"
                                                        Margin="6"
                                                        Background="{StaticResource $BackgroundColor_White}">
                                                    <Grid>
                                                        <TextBlock Text="Current"
                                                                   Visibility="{Binding CurrentBadgeVisibility}"
                                                                   HorizontalAlignment="Right"
                                                                   VerticalAlignment="Top"
                                                                   Padding="6,2"
                                                                   Background="#FF1E88E5"
                                                                   Foreground="White"
                                                                   FontWeight="SemiBold"
                                                                   FontSize="10"
                                                                   Margin="0,0,0,4" />
                                                        <StackPanel Margin="0,12,0,0">
                                                        <StackPanel Orientation="Horizontal" Margin="0,0,0,6">
                                                            <UserControls:ImageMakerControl Width="28"
                                                                                            Height="28"
                                                                                            ImageType="{Binding IconType}"
                                                                                            SetAsFontImageWithSize="24"
                                                                                            HorizontalAlignment="Left"
                                                                                            Margin="0,0,6,0" />
                                                            <StackPanel>
                                                                <TextBlock Text="{Binding DisplayName}"
                                                                           TextWrapping="Wrap"
                                                                           Style="{StaticResource $TextBlockStyle}"
                                                                           FontWeight="Bold"
                                                                           MaxWidth="140" />
                                                                <TextBlock Text="{Binding DeviceNameDisplay}"
                                                                           TextWrapping="Wrap"
                                                                           Style="{StaticResource $TextBlockStyle}"
                                                                           FontSize="11"
                                                                           Foreground="{StaticResource $BackgroundColor_DarkGray}" />
                                                            </StackPanel>
                                                        </StackPanel>
                                                        <TextBlock Text="{Binding PlatformDisplay}"
                                                                   TextWrapping="Wrap"
                                                                   Style="{StaticResource $TextBlockStyle}"
                                                                   FontSize="11"
                                                                   Margin="0,0,0,4" />
                                                        <TextBlock Text="{Binding UuidDisplay}"
                                                                   TextWrapping="Wrap"
                                                                   Style="{StaticResource $TextBlockStyle}"
                                                                   FontSize="10"
                                                                   Foreground="{StaticResource $BackgroundColor_DarkGray}" />
                                                        <TextBlock Text="{Binding WorkspaceDisplay}"
                                                                   TextWrapping="Wrap"
                                                                   Style="{StaticResource $TextBlockStyle}"
                                                                   FontSize="10"
                                                                   Foreground="{StaticResource $BackgroundColor_DarkGray}" />
                                                        <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                                                            <Border Background="{Binding ConnectionBrush}"
                                                                    CornerRadius="4"
                                                                    Padding="4,2"
                                                                    Margin="0,0,6,0">
                                                                <TextBlock Text="{Binding ConnectionText}"
                                                                           Foreground="White"
                                                                           FontWeight="SemiBold"
                                                                           FontSize="11"
                                                                           TextAlignment="Center" />
                                                            </Border>
                                                            <Border Background="{Binding StatusBrush}"
                                                                    CornerRadius="4"
                                                                    Padding="4,2">
                                                                <TextBlock Text="{Binding StatusText}"
                                                                           Foreground="White"
                                                                           FontWeight="SemiBold"
                                                                           FontSize="11"
                                                                           TextAlignment="Center" />
                                                            </Border>
                                                        </StackPanel>
                                                        <TextBlock Text="{Binding HealthMessageDisplay}"
                                                                   TextWrapping="Wrap"
                                                                   Style="{StaticResource $TextBlockStyle}"
                                                                   FontSize="10"
                                                                   Margin="0,6,0,0"
                                                                   Foreground="{Binding HealthBrush}" />
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </DockPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>

    </Grid>
</Page>
